<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friends Survey</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/survey.css">
    <link href="https://fonts.googleapis.com/css?family=Rock+Salt&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <div class="jumbotron">
            <div>
                <h3>Take this short survey to find some FRIENDS. </h3>
                <h4>Pick an answer from 1-5 based on your interest (1 being the least and 5 being the most).</h4>
            </div>
            <div class="form-group">
                <input id="name" type="text" class="form-control" id="validate" placeholder="Name (Required)">
            </div>
            <div class="form-group">
                <input id="photo" type="text" class="form-control" id="validate"
                    placeholder="Link to Profile Photo (Required)">
            </div>
            <div class="form-group">
                <label for="question1">After work, you like to unwind with a glass of wine.</label>
                <select data-placeholder="" class="browser-default" id="question1">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question2">A fun night consists of going out to bars with friends.</label>
                <select data-placeholder="" class="browser-default" id="question2">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question3">You enjoy going on outdoor adventures. </label>
                <select data-placeholder="" class="browser-default" id="question3">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question4">You prefer a quiet night in to a crazy night out.</label>
                <select data-placeholder="" class="browser-default" id="question4">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question5">You're idea of decompressing is being out in nature.</label>
                <select data-placeholder="" class="browser-default" id="question5">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question6">You're able to relate to other's feelings. </label>
                <select data-placeholder="" class="browser-default" id="question6">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question7">You're more extroverted than introverted.</label>
                <select data-placeholder="" class="browser-default" id="question7">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question8">You enjoy long walks off of short peirs.</label>
                <select data-placeholder="" class="browser-default" id="question8">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question9">You enjoy going to outdoor concerts and festivals.</label>
                <select data-placeholder="" class="browser-default" id="question9">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question10">You're favorite color is blue.</label>
                <select data-placeholder="" class="browser-default" id="question10">
                    <option value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <div class="text-center">
                <button id="submitForm" type="submit" class="btn btn-success btn-lg">Submit</button>
            </div>

            </form>
        </div>

    </div>

    <div id="newFriend" class="modal" role="dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3> Great News!!! We just found a new friend for you!!!!!!!!!</h3>
            </div>
            <div class="modal-body">
                <img id="pic" src="" alt="no pic to display">
                <h4 id="match"></h4>
            </div>
            <div class="modal-footer">
                <a href="#" class="modal-action modal-close waves-effect waves-green btn-flat">Finished</a>
            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#submitForm").on("click", function () {
                function validate() {
                    var valid = true;
                    $("#validate").each(function () {
                        if ($(this).val() === "") {
                            valid = false;
                        }
                    });

                    $(".browser-default").each(function () {
                        if ($(this).val() === "") {
                            valid = false;
                        }
                    });
                    return valid;
                }

                if (validate() == true) {
                    var friendList = {
                        name: $("#name"),
                        photo: $("#photo"),
                        scores: [
                            $("question1").val(),
                            $("question2").val(),
                            $("question3").val(),
                            $("question4").val(),
                            $("question5").val(),
                            $("question6").val(),
                            $("question7").val(),
                            $("question8").val(),
                            $("question9").val(),
                            $("question10").val()
                        ]
                    };

                    var url = window.location.origin;

                    $.post(url + "api/friends", friendsList, function (data) {
                        $("#.match").text(data.name);
                        $("#pic").attr("src", data.photo);
                    });

                    $(".modal").modal();

                    $('#name').val("");
                    $('#photo').val("");
                    $('#question1').val("");
                    $('#question2').val("");
                    $('#question3').val("");
                    $('#question4').val("");
                    $('#question5').val("");
                    $('#question6').val("");
                    $('#question7').val("");
                    $('#question8').val("");
                    $('#question9').val("");
                    $('#question10').val("");
                }
                else {
                    alert("You must fill out all the fields to continue.")
                }
            })
        })


    </script>


</body>

</html>